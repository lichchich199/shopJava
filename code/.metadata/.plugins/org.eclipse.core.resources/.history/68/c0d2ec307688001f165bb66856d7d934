package DiamonShop.Dao;

import java.util.ArrayList;
import java.util.List;

import org.springframework.stereotype.Repository;

import DiamonShop.Dto.ProductsDto;
import DiamonShop.Dto.ProductsDtoMapper;

@Repository
public class ProductsDao extends BaseDao {
	
	private String sqlGetDataProducts() {
		StringBuilder sqlStringBuilder = new StringBuilder();
		
		sqlStringBuilder.append("SELECT ");
		sqlStringBuilder.append("p.id as id_product, ");
		sqlStringBuilder.append("p.id_category, ");
		sqlStringBuilder.append("p.sizes, ");
		sqlStringBuilder.append("p.name as name_product, ");
		sqlStringBuilder.append("p.price, ");
		sqlStringBuilder.append("p.sale, ");
		sqlStringBuilder.append("p.title, ");
		sqlStringBuilder.append("p.highlight, ");
		sqlStringBuilder.append("p.new_product, ");
		sqlStringBuilder.append("p.details, ");
		sqlStringBuilder.append("p.created_at, ");
		sqlStringBuilder.append("p.updated_at, ");
		sqlStringBuilder.append("c.id as id_color, ");
		sqlStringBuilder.append("c.name as name_color, ");
		sqlStringBuilder.append("c.code as code_color, ");
		sqlStringBuilder.append("c.img ");
		sqlStringBuilder.append("from products p ");
		sqlStringBuilder.append("INNER JOIN colors c ON p.id = c.id_product");
		
		return sqlStringBuilder.toString();
	}
	
	public List<ProductsDto> getDataSlices() {
		List<ProductsDto> list = new ArrayList<ProductsDto>();

		list = _jdbcTemplate.query(sqlGetDataProducts, new ProductsDtoMapper());

		return list;
	}

}
